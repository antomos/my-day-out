
<% alternatives = Array.new %>
<% event.alternative_places["results"].first(5).each do |place| %>
  <% alternatives << place["name"] %>
<% end %>
<% coord = event.place.search_geometry_location.split(',') %>
<% @markers =
      [{
        lat: coord[0],
        lng: coord[1]

      }]
%>






<div class="card"  data-edit-event-target="card" >
  <div class="col" style="" >


  <%# title  %>
    <div class="event-infos <%= 'd-none' if event.errors.any? %>" data-edit-event-target="infos">
        <h2><%= event.order_number %>. <%= event.place.name  %></h2>
        <small> ( <%= event.start_time  %> - <%= event.end_time  %>)</small>
    </div>
    <div style="display:flex";>

    <%# card image %>
      <% if event.place.photo.attached? %>
        <%= cl_image_tag event.place.photo.key, style: "min-width:190px; min-height:220px" %>
      <% else %>
        <img src="https://res.cloudinary.com/danwlbu2c/image/upload/c_fill,h_300,w_400/v1/development/nm0x8y7ykna21y2h1w2gpxi0fto6" style= "min-width:190px; min-height:220px">
      <% end %>

      <%# edit form %>

    </div>

    <%# details %>
    <div class="zoom" data-edit-event-target="details" style="min-width:150px; max-height:300px"; >
        <p><%= event.directions_to_event["journey_duration"] %></p>
        <% event.directions_to_event["journey_legs"].each do |leg| %>
          <li><%= leg %></li>
        <% end %>



    </div>
  </div>
<button class="btn btn-pink border2 m-1 edit-button" data-edit-event-target="button" >
                Edit
        </button>
<div class="edit-form d-none" data-edit-event-target="formdiv">
  <button class= "" style="float: right";>
    <i class="fa-solid fa-xmark" data-action="click->edit-event#hideForm"></i>
  </button>
      <div style="width: 200px; height: 200px;"
            data-controller="map"
            data-map-markers-value="<%= @markers.to_json %>"
            data-map-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>">
      </div>
  <form  id="edit-form" style="display:none;" >
    <label for="edit-title">Title:</label>
    <input type="text" id="edit-title">
    <label for="edit-details">Details:</label>
    <textarea id="edit-details"></textarea>
    <input type="hidden" id="edit-id">
    <button type="submit">Save</button>
  </form>
</div>

</div>
